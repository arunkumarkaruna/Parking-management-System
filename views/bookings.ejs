<!DOCTYPE html>
<html :class="{ 'theme-dark': dark }" x-data="data()" lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check my Bookings</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/tailwind.output.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    <script src="../js/init-alpine.js"></script>
</head>
<body class="dark:bg-black">
    <div class="antialiased font-sans bg-purple-100 mt-5 rounded dark:bg-black">
        <button class="bg-purple-300  uppercase px-8 py-3 ml-2 mt-2 hover:bg-purple-400 rounded-full  font-serif text-purple-100 mr-1 mb-1" type="button">
            <a href="/dashboard" class="hover:no-underline hover:text-purple-100">Back to Dashboard</a>
          </button>
        <div class="container mx-auto px-4 sm:px-8">
          <div class="py-8">
            <div>
                <h2 class="text-2xl text-purple-500 font-serif leading-tight">Check Bookings</h2>
            </div>
              </div> 
              <div class="-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">
                  <div class="inline-block min-w-full shadow rounded-lg overflow-hidden">
                      <table class="min-w-full leading-normal">
                          <thead>
                              <tr>
                                  <th
                                      class="dark:bg-black px-5 py-3 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      User
                                  </th>
                                  <th
                                      class="dark:bg-black px-5 py-3 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      Email
                                  </th>
                                  <th
                                  class="dark:bg-black px-2 py-1 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                  Booking Date
                                  </th>
                                  <th
                                      class="dark:bg-black px-2 py-1 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      Vehicle Number
                                  </th>
                                   <th
                                      class="dark:bg-black px-2 py-1 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      Time Needed
                                  </th>
                                  <th
                                      class="dark:bg-black px-5 py-3 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      Start Time
                                  </th>
                                  <th
                                      class="dark:bg-black px-5 py-3 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      End Time
                                  </th>
                                  <th
                                      class="dark:bg-black px-5 py-3 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      Area
                                  </th>
                                  <th
                                      class="dark:bg-black px-2 py-1 border-b-2 border-gray-200 bg-purple-100 text-left text-xs font-semibold text-purple-500 uppercase tracking-wider">
                                      Status
                                  </th>
                              </tr>
                          </thead>
                          <tbody>
                             <% for (var i=0; i<booking.length ; i++) { %>
                              <% if (userEmailInSession == email[i]) { %>
                                <tr>
                                  <td class="dark:bg-black px-5 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                      <div class="flex items-center">
                                          <!-- <div class="flex-shrink-0 w-10 h-10">
                                              <img class="w-full h-full rounded-full"
                                                  src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2.2&w=160&h=160&q=80"
                                                  alt="" />
                                          </div> -->
                                          <div class="ml-3">
                                              <p class="text-indigo-500 whitespace-no-wrap">
                                                  <%= userFirstNameWhoBooked[i] %>
                                              </p>
                                          </div>
                                      </div>
                                  </td>
                                  <td class="dark:bg-black px-5 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                      <p class="text-indigo-500 whitespace-no-wrap"><%= userEmailWhoBooked[i] %></p>
                                  </td>
                                  <td class="dark:bg-black px-7 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                    <p class="text-indigo-500 whitespace-no-wrap"><%= createdAt[i] %></p>
                                 </td>
                                  <td class="dark:bg-black px-2 py-3 border-b border-gray-200 bg-purple-50 text-sm">
                                      <p class="text-indigo-500 whitespace-no-wrap">
                                          <%= vno[i] %>
                                      </p>
                                  </td>
                                  <td class="dark:bg-black px-1 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                      <span
                                          class="relative inline-block px-3 py-1 font-semibold text-green-900 dark:text-green-200 leading-tight ml-4">
                                          <span aria-hidden
                                              class="absolute inset-0 bg-green-200 dark:bg-green-900 opacity-50 rounded-full ml-1"></span>
                                          <span class="relative text-right"><%= time[i] %></span>
                                      </span>
                                  </td>
                                  <td class="dark:bg-black px-3 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                    <span
                                        class="relative inline-block px-3 py-1 font-semibold text-green-900 dark:text-green-200 leading-tight ml-4">
                                        <span aria-hidden
                                            class="absolute inset-0 bg-green-200 dark:bg-green-900 opacity-50 rounded-full ml-1"></span>
                                          <% var d = starttime[i];
                                          var s = "" + d;
                                          var t = s.slice(11, 20) %>
                                        <span class="relative text-right"><%= t %></span>
                                    </span>
                                </td>
                                <td class="dark:bg-black px-3 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                    <span
                                        class="relative inline-block px-3 py-1 font-semibold text-green-900 dark:text-green-200 leading-tight ml-4">
                                        <span aria-hidden
                                            class="absolute inset-0 bg-green-200 dark:bg-green-900 opacity-50 rounded-full ml-1"></span>
                                           <% var d1 = endtime[i]; 
                                              var s1 = "" + d1;
                                              var t1 = s1.slice(11, 20)
                                           %>
                                        <span class="relative text-right"><%= t1 %></span>
                                    </span>
                                </td>
                                  <td class="dark:bg-black px-5 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                    <p class="text-indigo-500 whitespace-no-wrap">
                                        <%= area[i] %>
                                    </p>
                                </td>
                                <% if (expirystatus[i] == true) { %>
                                    <td class="dark:bg-black px-3 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                        <span
                                            class="relative inline-block px-3 py-1 font-semibold text-red-900 dark:text-red-200 leading-tight ml-5">
                                            <span aria-hidden
                                                class="absolute inset-0 bg-red-200 dark:bg-red-900 opacity-50 rounded-full"></span>
                                            <span id="min" class="relative text-right">Expired</span>
                                        </span>
                                    </td>
                                <% } else { %>
                                    <td class="dark:bg-black px-3 py-2 border-b border-gray-200 bg-purple-50 text-sm">
                                        <span
                                            class="relative inline-block px-3 py-1 font-semibold text-green-900 dark:text-green-200 leading-tight ml-5">
                                            <span aria-hidden
                                                class="absolute inset-0 bg-green-200 dark:bg-green-900 opacity-50 rounded-full"></span>
                                            <span id="min" class="relative text-right">Active</span>
                                        </span>
                                    </td>
                                <% } %>
                              </tr>
                            <%} else { continue; } %>
                          <% } %>
                          </tbody>
                      </table>
    <!-- Grouped circle -->
        <% if(pages > 0) { %> <!-- show pagination if there is pages -->
        <div class="mb-10 w-full md:w-1/2 text-center md:text-left">
          <div class="inline-block mt-3" style="margin-left: 30rem;">
              <span class="text-xs xs:text-sm text-indigo-500">Showing 1 to 10 of <%= count %> Entries</span>
            <hr class="my-2">
            <nav class="inline-flex shadow-md text-sm leading-5 text-purple-600 dark:bg-black bg-purple-50 border-gray-400 rounded-full py-2 px-4">
                <% if(current == 1) { %>
                <a href="#" class="flex mx-1 h-10 items-center justify-center disabled:opacity-50 hover:no-underline hover:text-purple-600">
                First<!-- prev -->
              </a>
              <% } else { %>
                <a href="1" class="flex mx-1 h-10 items-center justify-center hover:no-underline hover:text-purple-600">First</a>
                <% } %>
                  <!-- ITEMS  -->
              <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
              <% if(i !== 1) { %>
                <a href="#" class="flex mx-1 rounded-full w-10 h-10 items-center justify-center hover:bg-gray-300 transition ease-in-out duration-300 disabled:opacity-50">
                ...
              </a>
              <% } %>
              <% for(; i <= (Number(current) + 4) && i <= pages; i++) { %>
                <% if(i == current) { %>
                    <a href="<%= i %>" class="flex mx-1 rounded-full w-10 h-10 items-center justify-center hover:bg-gray-300 transition ease-in-out duration-300 hover:no-underline hover:text-purple-600">
                        <%= i %>
                      </a>
                <% } else { %>
                    <a href="<%= i %>" class="flex mx-1 rounded-full w-10 h-10 items-center justify-center hover:bg-gray-300 transition ease-in-out duration-300 hover:no-underline hover:text-purple-600"><%= i %></a>
                    <% } %>
                <% if (i == Number(current) + 4 && i < pages) { %>
                    <a href="#" class="flex mx-1 rounded-full w-10 h-10 items-center justify-center shadow-sm bg-blue-600 hover:bg-blue-500 text-gray-100 disabled:opacity-50 hover:no-underline hover:text-purple-600">...</a>
              <% } %>
              <% } %>
                <!-- LAST ITEM -->
                <% if(current == pages) { %>
              <a href="#" class="flex mx-1 h-10 items-center justify-center disabled:opacity-50 hover:no-underline hover:text-purple-600">
               <!-- next --> Last
              </a>
              <% } else { %>
                <a href="<%= pages %>" class="flex mx-1 h-10 items-center justify-center hover:no-underline hover:text-purple-600">Last</a>
                <% } %>
                  </nav>
                      </div>
                    </div>
                    <% } %>
                  </div>
              </div>
          </div>
      </div>
</body>
</html>


